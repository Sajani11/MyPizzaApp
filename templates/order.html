{% extends 'layout.html' %} {% block content %}
<div class="container mt-5">
  <h2 class="text-center mb-4">🚚 Confirm Your Order & Payment</h2>

  <form method="POST">
    {% for item in cart_items %}
    <div class="card shadow p-4 mb-3">
      <h4>{{ item.name }}</h4>
      <p>
        Size: {{ item.size }} | Quantity: {{ item.quantity }} | Crust: {{
        item.crust }} | Cheese: {{ item.cheese }} {% if item.toppings %} |
        Toppings: {{ item.toppings }}{% endif %} {% if item.extras %} | Extras:
        {{ item.extras }}{% endif %}
      </p>
      <p>Subtotal: NPR {{ item.subtotal }}</p>
    </div>
    {% endfor %}

    <div class="card shadow p-4 mb-4">
      {% if reward %}
      <p class="fw-bold">🎁 Reward Applied: {{ reward }}</p>
      {% endif %}

      <p class="fw-bold">Delivery Fee: NPR {{ delivery_fee }}</p>
      <hr />
      <p class="fw-bold fs-5">Total Amount: NPR {{total_price}}</p>

      <div class="form-group mb-3 mt-3">
        <label><b>Contact Number:</b></label>
        <input
          type="tel"
          name="contact_number"
          class="form-control"
          placeholder="Enter your contact number"
          pattern="[0-9]{10}"
          required
        />
      </div>

      <div class="form-group mb-3">
        <label><b>Delivery Address:</b></label>
        <textarea
          name="address"
          class="form-control"
          rows="3"
          placeholder="Enter your delivery location"
          required
        ></textarea>
      </div>

      <div class="form-group mb-3">
        <label for="payment_method"><b>Select Payment Option:</b></label>
        <select name="payment_method" class="form-control" required>
          <option value="esewa">eSewa 💚</option>
          <option value="khalti">Khalti 💜</option>
          <option value="imepay">IME Pay 🔴</option>
          <option value="cod">Cash on Delivery 💵</option>
          <option value="bank_transfer">Bank Transfer 🏦</option>
        </select>
      </div>

      <button type="submit" class="btn btn-primary w-100">
        Place Order & Pay
      </button>
    </div>
  </form>
</div>
{% endblock %}
